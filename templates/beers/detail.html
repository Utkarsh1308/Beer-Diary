{% extends 'base.html' %}
{% load custom_url %}
{% load staticfiles %}

{% block title %}
Beer Diary
{% endblock %}

{% block add-css-files %}

<style type="text/css">

    .raleway {
      background-color: #18191D;
    }

    .table_options{
        color:white;
        margin-left: 12px;
    }

    .beer-details{
        color: white;
        border-radius: 6px;
        background-color: #0C0D0F;
        height: auto;
        width: 820px;
        margin-bottom: 20px;
        padding: 16px 8px 16px 12px;
        min-width: 600px;
        box-shadow: 10px 10px #000;
    }

    .green{
        border: none;
        color: white !important;
        padding: 4px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 15px;
        float: right;
        border-radius: 4px;
        box-shadow: 5px 5px #000;
        margin-right: 4px;
        background-color: #7033b5;
        -webkit-transition-duration: 0.2s; /* Safari */
        transition-duration: 0.2s;
    }

    .green:hover {
        background-color: #3c33b2; /* Green */
        color: white;
    }

    body{
        overflow-x: hidden
    }
    
</style>
{% endblock %}

{% block add-js-files %}
<script src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular.min.js"></script>
<script>

  var posts = [];
  {% for x in Beers %}
    posts.push({brewer:"{{ x.brewer }}", id:"x.id", delete_link:"{% url 'beers:delete_beer' x.id %}", name:'{{ x.name }}', link:"{% url 'beers:beer' beer=x.name|custom_url %}", edit_link:"{% url 'beers:update_beer' x.id %}", price: "{{ x.price }}", rating:"{{ x.rating }}", date:"{{ x.date.date }}"},)
  {% endfor %}

  var app = angular.module("myApp",[]);
  app.controller("myCtrl", function($scope){

    $scope.myObj = posts
  });

</script>
{% endblock %}

{% block main-content %}
  <div class="raleway">


      <div class="row" style="margin-bottom: 0px;margin-top: 0px" ng-app="myApp" ng-controller="myCtrl" ng-cloak >
          <div class="col-md-2" style="margin-left: 80px">
          </div>

          <div>
              <table>
                  <th>
                      <div class="raleway" style="text-align:left;color:#fff;margin-bottom:-20px"><p style="font-weight: 600"><span style="padding: 10px;font-size: 32px">My Posts</span></p>
                      </div>
                  </th>
                  <tr style="color: aliceblue;padding: 0px">
                      <td style="width: 0px !important;text-align: end">
                          <div class="dropdown">
                              <button id="label" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background: #18191D; border: none;outline: none;cursor: pointer;margin-bottom: 10px">
                                  <span style="color: aliceblue;font-weight: 200;font-size: 15px">Sort By &nbsp;&nbsp;</span>
                                  <span id ="hello" style="color: violet">
                                      Accuracy
                                  </span>
                                  <span style="color: aliceblue">&#9660;</span>
                              </button>
                              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="background: white">
                                  <a class="dropdown-item" href="#" style="text-decoration: none;color: #0C0D0F;font-weight: 600">Accuracy</a>
                                  <a class="dropdown-item" href="#" style="text-decoration: none;color: #0C0D0F;font-weight: 600">Submissions</a>
                                  <a class="dropdown-item" href="#" style="text-decoration: none;color: #0C0D0F;font-weight: 600">Average Time</a>
                              </div>
                          </div>
                      </td>
                  </tr>
                  <tr ng-repeat="x in myObj" class="table_options">
                      {% verbatim %}

                      <td>
                          <div class="beer-details">
                              <table style="width: 800px">
                                  <tr>
                                      <td style="width: 330px">
                                          <div style="white-space: nowrap;text-overflow: ellipsis;width: 300px;overflow: hidden">
                                              <h5 style="margin-left:4px;margin-top:0px;color: white;margin-bottom: 20px;width: 120px">{{x.name}}</h5>
                                          </div>

                                      </td>
                                      <td style="width: 220px">
                                          <div style="white-space: nowrap;text-overflow: ellipsis;width: 200px;overflow: hidden;margin-top: 8px">
                                              <h6 style="margin-left:4px;margin-top:0px;color: white;margin-bottom: 12px;width: 120px">{{x.date}}</h6>
                                          </div>
                                          <p style="margin-bottom: 4px"><span style="color:white;font-weight:100;font-size:15px;margin-left:4px">Brewer &nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: 300"> {{ x.brewer }}</span></span> </p>

                                          <p style="margin-bottom: 4px"><span style="color:white;font-weight:100;font-size:15px;margin-left:4px;">Price &nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: 300"> {{ x.price }}</span></span> </p>
                                          <p style="margin-bottom: 0px"><span style="color:white;font-weight:100;font-size:15px;margin-left:4px;">Rating &nbsp;&nbsp;&nbsp;&nbsp;<span style="font-weight: 300"> {{ x.rating }}</span></span> </p>
                                      </td>
                                      <td align="right" style="width: auto">
                                          <a class="green" style="font-weight:600" id="button" href={{x.link}}>View Details</a><br><br>
                                          <a class="green" href={{x.edit_link}} style="font-weight:600" id="button" href={{x.link}}> &nbsp;&nbsp; Edit Post &nbsp;&nbsp; </a>
                                      </td>
                                      {% endverbatim %}
                                  </tr>
                              </table>
                          </div>
                      </td>

                  </tr>
              </table>
          </div>
      </div>
  </div>

{% endblock %}
